{#
  Help Modal Partial
  Provides consistent help modal across all pages
#}

<!-- Help Modal -->
<div id="helpModal" class="help-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="helpModalTitle" onclick="if(event.target === this) hideHelp()">
    <div class="help-content" tabindex="-1">
        <button type="button" class="help-close" onclick="hideHelp()" aria-label="Close help">&times;</button>
        <h2 id="helpModalTitle">iNTERCEPT Help</h2>

        <div class="help-tabs" role="tablist" aria-label="Help sections">
            <button type="button" class="help-tab active" data-tab="icons" onclick="switchHelpTab('icons')" role="tab" aria-controls="help-icons" aria-selected="true">Icons</button>
            <button type="button" class="help-tab" data-tab="modes" onclick="switchHelpTab('modes')" role="tab" aria-controls="help-modes" aria-selected="false">Modes</button>
            <button type="button" class="help-tab" data-tab="wifi" onclick="switchHelpTab('wifi')" role="tab" aria-controls="help-wifi" aria-selected="false">WiFi</button>
            <button type="button" class="help-tab" data-tab="tips" onclick="switchHelpTab('tips')" role="tab" aria-controls="help-tips" aria-selected="false">Tips</button>
        </div>

        <!-- Icons Section -->
        <div id="help-icons" class="help-section active" role="tabpanel">
            <h3>Stats Bar Icons</h3>
            <div class="icon-grid">
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="5" width="16" height="14" rx="2"/><line x1="8" y1="10" x2="16" y2="10"/><line x1="8" y1="14" x2="12" y2="14"/></svg></span><span class="desc">POCSAG messages decoded</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="5" width="16" height="14" rx="2"/><line x1="8" y1="10" x2="16" y2="10"/><line x1="8" y1="14" x2="12" y2="14"/></svg></span><span class="desc">FLEX messages decoded</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></span><span class="desc">Total messages received</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="2"/><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49"/></svg></span><span class="desc">Unique sensors detected</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></span><span class="desc">Device types found</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 7L9 3 5 7l4 4"/><path d="m17 11 4 4-4 4-4-4"/><path d="m8 12 4 4 6-6-4-4-6 6"/></svg></span><span class="desc">Satellites monitored</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><circle cx="12" cy="20" r="1" fill="currentColor"/></svg></span><span class="desc">WiFi Access Points</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg></span><span class="desc">Connected WiFi clients</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m11 17 2 2a1 1 0 1 0 3-3"/><path d="m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4"/><path d="m21 3 1 11h-2"/><path d="M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3"/><path d="M3 4h8"/></svg></span><span class="desc">Captured handshakes</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"/><path d="M3 9a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M17 9a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M3 15a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M17 15a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"/><path d="M9 9l-4 -1"/><path d="M15 9l4 -1"/><path d="M9 15l-4 1"/><path d="M15 15l4 1"/></svg></span><span class="desc">Detected drones (click for details)</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg></span><span class="desc">Rogue APs (click for details)</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6.5 6.5 17.5 17.5 12 22 12 2 17.5 6.5 6.5 17.5"/></svg></span><span class="desc">Bluetooth devices</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg></span><span class="desc">BLE beacons / APRS stations</span></div>
            </div>

            <h3>Mode Tab Icons</h3>
            <div class="icon-grid">
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="5" width="16" height="14" rx="2"/><line x1="8" y1="10" x2="16" y2="10"/><line x1="8" y1="14" x2="12" y2="14"/></svg></span><span class="desc">Pager - POCSAG/FLEX decoder</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="2"/><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49"/></svg></span><span class="desc">433MHz - Sensor decoder</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg></span><span class="desc">Meters - Utility meter decoder</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16v-2l-8-5V3.5a1.5 1.5 0 0 0-3 0V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z"/></svg></span><span class="desc">Aircraft - ADS-B tracking &amp; history</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 18l2 2h14l2-2"/><path d="M5 18v-4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v4"/><path d="M12 12V6"/><path d="M12 6l4 3"/></svg></span><span class="desc">Vessels - AIS &amp; VHF DSC distress</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg></span><span class="desc">APRS - Amateur radio tracking</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18"/><path d="M9 21V9"/></svg></span><span class="desc">Listening Post - SDR scanner</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4.9 19.1C1 15.2 1 8.8 4.9 4.9"/><circle cx="12" cy="12" r="2"/><path d="M19.1 4.9C23 8.8 23 15.1 19.1 19"/></svg></span><span class="desc">Spy Stations - Number stations database</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="3"/><path d="M12 2v4m0 12v4M2 12h4m12 0h4"/></svg></span><span class="desc">Meshtastic - LoRa mesh networking</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg></span><span class="desc">WebSDR - Remote SDR receivers</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12h6l3-9 3 18 3-9h5"/></svg></span><span class="desc">SubGHz - Sub-GHz signal analysis</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><circle cx="12" cy="20" r="1" fill="currentColor" stroke="none"/></svg></span><span class="desc">WiFi - Network scanner</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6.5 6.5 17.5 17.5 12 22 12 2 17.5 6.5 6.5 17.5"/></svg></span><span class="desc">Bluetooth - BT/BLE scanner</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="10" r="3"/><path d="M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z"/><path d="M9.5 8.5l3 3 2-4-2 4-3 3"/></svg></span><span class="desc">BT Locate - Bluetooth device locator</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></span><span class="desc">TSCM - Counter-surveillance</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 7L9 3 5 7l4 4"/><path d="m17 11 4 4-4 4-4-4"/><path d="m8 12 4 4 6-6-4-4-6 6"/><path d="m16 8 3-3"/><path d="M9 21a6 6 0 0 0-6-6"/></svg></span><span class="desc">Satellite - Pass prediction</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="12" cy="12" r="3"/><path d="M3 9h2"/><path d="M19 9h2"/><path d="M3 15h2"/><path d="M19 15h2"/></svg></span><span class="desc">ISS SSTV - Space station image decoder</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg></span><span class="desc">Weather Sat - NOAA &amp; Meteor imagery</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="12" cy="12" r="3"/><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49"/></svg></span><span class="desc">HF SSTV - Shortwave image decoder</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="10" r="3"/><path d="M12 21.7C17.3 17 20 13 20 10a8 8 0 1 0-16 0c0 3 2.7 7 8 11.7z"/></svg></span><span class="desc">GPS - GNSS signal analysis</span></div>
                <div class="icon-item"><span class="icon icon--sm"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span><span class="desc">Space Weather - Solar &amp; geomagnetic data</span></div>
            </div>
        </div>

        <!-- Modes Section -->
        <div id="help-modes" class="help-section" role="tabpanel" hidden>
            <h3>Pager Mode</h3>
            <ul class="tip-list">
                <li>Decodes POCSAG and FLEX pager signals using RTL-SDR</li>
                <li>Set frequency to local pager frequencies (common: 152-158 MHz)</li>
                <li>Messages are displayed in real-time as they're decoded</li>
                <li>Use presets for common pager frequencies</li>
            </ul>

            <h3>433MHz Sensor Mode</h3>
            <ul class="tip-list">
                <li>Decodes wireless sensors on 433.92 MHz ISM band</li>
                <li>Detects temperature, humidity, weather stations, tire pressure monitors</li>
                <li>Supports many common protocols (Acurite, LaCrosse, Oregon Scientific, etc.)</li>
                <li>Device intelligence builds profiles of recurring devices</li>
            </ul>

            <h3>Utility Meter Mode</h3>
            <ul class="tip-list">
                <li>Decodes utility meter transmissions (water, gas, electric) using rtlamr</li>
                <li>Supports ERT protocol on 912 MHz (North America) or 868 MHz (Europe)</li>
                <li>Displays meter IDs and consumption data in real-time</li>
                <li>Supports SCM, SCM+, IDM, NetIDM, and R900 message types</li>
            </ul>

            <h3>Aircraft (Dashboard)</h3>
            <ul class="tip-list">
                <li>Opens the dedicated ADS-B Dashboard for aircraft tracking</li>
                <li>Features radar scope, map view, airband audio, and ACARS decoding</li>
                <li>Optional history mode persists data to Postgres for long-term analysis</li>
                <li>Access history dashboard at <code>/adsb/history</code></li>
            </ul>

            <h3>Vessels (Dashboard)</h3>
            <ul class="tip-list">
                <li>Opens the AIS Dashboard for maritime vessel tracking</li>
                <li>Displays vessel name, MMSI, callsign, destination, and navigation data</li>
                <li><strong>VHF DSC Channel 70:</strong> Monitors maritime distress frequency (156.525 MHz)</li>
                <li>Decodes DSC messages: Distress, Urgency, Safety, and Routine calls</li>
                <li>MMSI country identification via Maritime Identification Digits (MID)</li>
                <li>Visual alerts for DISTRESS and URGENCY messages with map markers</li>
            </ul>

            <h3>APRS Mode</h3>
            <ul class="tip-list">
                <li>Decodes APRS (Automatic Packet Reporting System) on VHF</li>
                <li>Tracks amateur radio operators transmitting position data</li>
                <li>Regional frequencies: 144.390 MHz (N. America), 144.800 MHz (Europe)</li>
                <li>Uses Direwolf or multimon-ng for packet decoding</li>
                <li>Interactive map shows station positions in real-time</li>
            </ul>

            <h3>Listening Post Mode</h3>
            <ul class="tip-list">
                <li>Wideband SDR scanner with spectrum visualization</li>
                <li>Tune to any frequency supported by your SDR hardware</li>
                <li>AM/FM/USB/LSB demodulation modes</li>
                <li>Bookmark frequencies for quick recall</li>
                <li>Quick tune presets for emergency and marine channels</li>
            </ul>

            <h3>Spy Stations</h3>
            <ul class="tip-list">
                <li>Database of number stations and diplomatic HF networks</li>
                <li>Browse stations from priyom.org with frequencies and schedules</li>
                <li>Filter by type (number/diplomatic), country, and mode</li>
                <li>Famous stations: UVB-76 "The Buzzer", Cuban HM01, Israeli E17z</li>
                <li>Click "Tune" to listen via Listening Post mode</li>
            </ul>

            <h3>Meshtastic Mode</h3>
            <ul class="tip-list">
                <li>Integrates with Meshtastic LoRa mesh network devices</li>
                <li>Connect Heltec, T-Beam, RAK, or other compatible devices via USB</li>
                <li>Real-time message streaming with RSSI and SNR metrics</li>
                <li>Configure channels with encryption keys</li>
                <li>View connected nodes and message history</li>
                <li>Requires: Meshtastic device + <code>pip install meshtastic</code></li>
            </ul>

            <h3>WebSDR Mode</h3>
            <ul class="tip-list">
                <li>Access remote WebSDR receivers around the world</li>
                <li>Listen to shortwave, amateur, and broadcast stations without local SDR hardware</li>
                <li>Browse available public WebSDR servers by location and frequency range</li>
                <li>Useful for monitoring HF bands from different geographic locations</li>
            </ul>

            <h3>SubGHz Mode</h3>
            <ul class="tip-list">
                <li>Analyzes sub-GHz radio signals (common ISM bands: 315, 433, 868, 915 MHz)</li>
                <li>Captures and decodes wireless remote controls, key fobs, and IoT devices</li>
                <li>Protocol identification and signal analysis</li>
                <li>Useful for RF security research and device testing</li>
            </ul>

            <h3>Satellite Mode</h3>
            <ul class="tip-list">
                <li>Track satellites using TLE (Two-Line Element) data</li>
                <li>Add satellites manually or fetch from Celestrak by category</li>
                <li>Categories: Amateur, Weather, ISS, Starlink, GPS, and more</li>
                <li>View next pass predictions with elevation and duration</li>
            </ul>

            <h3>ISS SSTV Mode</h3>
            <ul class="tip-list">
                <li>Decodes Slow Scan Television (SSTV) images from the International Space Station</li>
                <li>Automated ISS pass tracking with Doppler correction on 145.800 MHz</li>
                <li>Images decoded in real-time using slowrx</li>
                <li>Gallery view with timestamped decoded images</li>
            </ul>

            <h3>Weather Sat Mode</h3>
            <ul class="tip-list">
                <li>Receives weather satellite imagery from NOAA APT and Meteor M2 LRPT</li>
                <li>Uses SatDump for satellite signal processing and image decoding</li>
                <li>Automated pass prediction and scheduling</li>
                <li>Decoded images displayed in gallery with pass metadata</li>
            </ul>

            <h3>HF SSTV Mode</h3>
            <ul class="tip-list">
                <li>Decodes Slow Scan Television images from HF amateur radio bands</li>
                <li>Common SSTV frequencies: 14.230 MHz (20m), 7.171 MHz (40m), 3.730 MHz (80m)</li>
                <li>Supports multiple SSTV modes (Martin, Scottie, Robot, etc.)</li>
                <li>Real-time image decoding with gallery view</li>
            </ul>

            <h3>GPS Mode</h3>
            <ul class="tip-list">
                <li>GNSS signal analysis and satellite constellation tracking</li>
                <li>Displays GPS, GLONASS, Galileo, and BeiDou satellite positions</li>
                <li>Signal strength visualization and fix quality metrics</li>
                <li>Useful for evaluating GNSS reception and interference</li>
            </ul>

            <h3>Space Weather Mode</h3>
            <ul class="tip-list">
                <li>Real-time solar and geomagnetic data from NOAA SWPC, NASA SDO, and HamQSL</li>
                <li>Solar indices (SFI, Kp, A-index, sunspot number) and NOAA G/S/R scales</li>
                <li>HF band conditions, X-ray flux, solar wind speed, and flare probability</li>
                <li>Solar imagery (SDO 193/304/Magnetogram), D-RAP absorption maps, aurora forecast</li>
                <li>No SDR hardware required &mdash; all data from public APIs</li>
            </ul>

            <h3>WiFi Mode</h3>
            <ul class="tip-list">
                <li>Requires a WiFi adapter capable of monitor mode</li>
                <li>Click "Enable Monitor" to put adapter in monitor mode</li>
                <li>Scans all channels or lock to a specific channel</li>
                <li>Detects drones by SSID patterns and manufacturer OUI</li>
                <li>Rogue AP detection flags same SSID on multiple BSSIDs</li>
                <li>Click network rows to target for deauth or handshake capture</li>
            </ul>

            <h3>Bluetooth Mode</h3>
            <ul class="tip-list">
                <li>Scans for classic Bluetooth and BLE devices</li>
                <li>Shows device names, addresses, and signal strength</li>
                <li>Manufacturer lookup from MAC address OUI</li>
                <li>Radar visualization shows device proximity</li>
            </ul>

            <h3>BT Locate Mode</h3>
            <ul class="tip-list">
                <li>Locate and track specific Bluetooth devices by signal strength</li>
                <li>Directional signal strength indicator for physical device finding</li>
                <li>Detects known tracker signatures (AirTag, Tile, SmartTag)</li>
                <li>Useful for finding lost devices or detecting unwanted trackers</li>
            </ul>

            <h3>TSCM Mode</h3>
            <ul class="tip-list">
                <li>Technical Surveillance Countermeasures sweep</li>
                <li>Scans for unknown RF transmitters, WiFi devices, Bluetooth</li>
                <li>Baseline comparison to detect new/anomalous devices</li>
                <li>Threat classification: Critical, High, Medium, Low</li>
                <li>Useful for security audits and bug sweeps</li>
                <li><em style="color: var(--text-muted);">Note: This feature is in early development</em></li>
            </ul>

            <h3>Network Monitor</h3>
            <ul class="tip-list">
                <li>Aggregates data from multiple remote INTERCEPT agents</li>
                <li>View all WiFi, Bluetooth, ADS-B, AIS data in one unified view</li>
                <li>Real-time streaming via Server-Sent Events (SSE)</li>
                <li>Location estimation using multi-agent trilateration</li>
                <li>Manage agents at <code>/controller/manage</code></li>
            </ul>
        </div>

        <!-- WiFi Section -->
        <div id="help-wifi" class="help-section" role="tabpanel" hidden>
            <h3>Monitor Mode</h3>
            <ul class="tip-list">
                <li><strong>Enable Monitor:</strong> Puts WiFi adapter in monitor mode for passive scanning</li>
                <li><strong>Kill Processes:</strong> Optional - stops NetworkManager/wpa_supplicant (may drop other connections)</li>
                <li>Some adapters rename when entering monitor mode (e.g., wlan0 &rarr; wlan0mon)</li>
            </ul>

            <h3>Handshake Capture</h3>
            <ul class="tip-list">
                <li>Click "Capture" on a network to start targeted handshake capture</li>
                <li>Status panel shows capture progress and file location</li>
                <li>Use deauth to force clients to reconnect (only on authorized networks!)</li>
                <li>Handshake files saved to /tmp/intercept_handshake_*.cap</li>
            </ul>

            <h3>Drone Detection</h3>
            <ul class="tip-list">
                <li>Drones detected by SSID patterns (DJI, Parrot, Autel, etc.)</li>
                <li>Also detected by manufacturer OUI in MAC address</li>
                <li>Distance estimated from signal strength (approximate)</li>
                <li>Click drone count in stats bar to see all detected drones</li>
            </ul>

            <h3>Rogue AP Detection</h3>
            <ul class="tip-list">
                <li>Flags networks where same SSID appears on multiple BSSIDs</li>
                <li>Could indicate evil twin attack or legitimate multi-AP setup</li>
                <li>Click rogue count to see which SSIDs are flagged</li>
            </ul>

            <h3>Proximity Alerts</h3>
            <ul class="tip-list">
                <li>Add MAC addresses to watch list for alerts when detected</li>
                <li>Watch list persists in browser localStorage</li>
                <li>Useful for tracking specific devices</li>
            </ul>

            <h3>Client Probe Analysis</h3>
            <ul class="tip-list">
                <li>Shows what networks client devices are looking for</li>
                <li>Orange highlights indicate sensitive/private network names</li>
                <li>Reveals user location history (home, work, hotels, airports)</li>
                <li>Useful for security awareness and pen test reports</li>
            </ul>
        </div>

        <!-- Tips Section -->
        <div id="help-tips" class="help-section" role="tabpanel" hidden>
            <h3>General Tips</h3>
            <ul class="tip-list">
                <li><strong>Collapsible sections:</strong> Click any section header (&nabla;) to collapse/expand</li>
                <li><strong>Sound alerts:</strong> Toggle sound on/off in settings for each mode</li>
                <li><strong>Export data:</strong> Use export buttons to save captured data as JSON</li>
                <li><strong>Device Intelligence:</strong> Tracks device patterns over time</li>
                <li><strong>Theme toggle:</strong> Click the theme button in header to switch dark/light mode</li>
                <li><strong>Settings:</strong> Click the gear icon in the header to access settings</li>
                <li><strong>Offline mode:</strong> Enable in Settings to use local assets without internet</li>
            </ul>

            <h3>Keyboard Shortcuts</h3>
            <ul class="tip-list">
                <li><strong>F1</strong> - Open this help page</li>
                <li><strong>?</strong> - Open help (when not typing in a field)</li>
                <li><strong>Escape</strong> - Close help and modal dialogs</li>
            </ul>

            <h3>Requirements</h3>
            <ul class="tip-list">
                <li><strong>Pager:</strong> RTL-SDR, rtl_fm, multimon-ng</li>
                <li><strong>433MHz Sensors:</strong> RTL-SDR, rtl_433</li>
                <li><strong>Utility Meters:</strong> RTL-SDR, rtl_tcp, rtlamr</li>
                <li><strong>Aircraft (ADS-B):</strong> RTL-SDR, dump1090 or rtl_adsb</li>
                <li><strong>Aircraft (ACARS):</strong> Second RTL-SDR, acarsdec</li>
                <li><strong>Vessels (AIS):</strong> RTL-SDR, AIS-catcher</li>
                <li><strong>APRS:</strong> RTL-SDR, direwolf or multimon-ng</li>
                <li><strong>Listening Post:</strong> RTL-SDR or SoapySDR-compatible hardware</li>
                <li><strong>Spy Stations:</strong> Internet connection (database lookup)</li>
                <li><strong>Meshtastic:</strong> Meshtastic LoRa device, <code>pip install meshtastic</code></li>
                <li><strong>WebSDR:</strong> Internet connection (remote receivers)</li>
                <li><strong>SubGHz:</strong> RTL-SDR or compatible SDR hardware</li>
                <li><strong>Satellite:</strong> Internet for Celestrak (optional), skyfield</li>
                <li><strong>ISS SSTV:</strong> RTL-SDR, slowrx</li>
                <li><strong>Weather Sat:</strong> RTL-SDR, SatDump</li>
                <li><strong>HF SSTV:</strong> RTL-SDR or SoapySDR-compatible hardware, slowrx</li>
                <li><strong>GPS:</strong> RTL-SDR or GPS-capable SDR</li>
                <li><strong>Space Weather:</strong> Internet connection (public APIs)</li>
                <li><strong>WiFi:</strong> Monitor-mode adapter, aircrack-ng suite</li>
                <li><strong>Bluetooth:</strong> Bluetooth adapter, bluez (hcitool/bluetoothctl)</li>
                <li><strong>BT Locate:</strong> Bluetooth adapter, bluez</li>
                <li><strong>TSCM:</strong> WiFi adapter, Bluetooth adapter, RTL-SDR (all optional)</li>
                <li>Run as root/sudo for full hardware access</li>
            </ul>

            <h3>Legal Notice</h3>
            <ul class="tip-list">
                <li>Only use on networks and devices you own or have authorization to test</li>
                <li>Passive monitoring may be legal; active attacks require authorization</li>
                <li>Check local laws regarding radio frequency monitoring</li>
            </ul>
        </div>
    </div>
</div>

<script>
// Help modal functions - defined here so all pages have them
(function() {
    let lastHelpFocusEl = null;

    // Only define if not already defined (index.html defines its own)
    if (typeof window.showHelp === 'undefined') {
        window.showHelp = function() {
            const modal = document.getElementById('helpModal');
            lastHelpFocusEl = document.activeElement;
            modal.classList.add('active');
            modal.setAttribute('aria-hidden', 'false');
            const content = modal.querySelector('.help-content');
            if (content) content.focus();
            document.body.style.overflow = 'hidden';
        };
    }

    if (typeof window.hideHelp === 'undefined') {
        window.hideHelp = function() {
            const modal = document.getElementById('helpModal');
            modal.classList.remove('active');
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
            if (lastHelpFocusEl && typeof lastHelpFocusEl.focus === 'function') {
                lastHelpFocusEl.focus();
            }
        };
    }

    if (typeof window.switchHelpTab === 'undefined') {
        window.switchHelpTab = function(tab) {
            document.querySelectorAll('.help-tab').forEach(t => {
                const isActive = t.dataset.tab === tab;
                t.classList.toggle('active', isActive);
                t.setAttribute('aria-selected', isActive ? 'true' : 'false');
            });
            document.querySelectorAll('.help-section').forEach(s => {
                const isActive = s.id === ('help-' + tab);
                s.classList.toggle('active', isActive);
                s.hidden = !isActive;
            });
        };
    }

    // Keyboard shortcuts for help (only add once)
    if (!window._helpKeyboardSetup) {
        window._helpKeyboardSetup = true;
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const modal = document.getElementById('helpModal');
                if (modal && modal.classList.contains('active')) hideHelp();
            }
            // Open help with F1 or ? key (when not typing in an input)
            var helpModal = document.getElementById('helpModal');
            if (helpModal && (e.key === 'F1' || (e.key === '?' && !e.target.matches('input, textarea, select'))) && !helpModal.classList.contains('active')) {
                e.preventDefault();
                showHelp();
            }
        });
    }
})();
</script>
